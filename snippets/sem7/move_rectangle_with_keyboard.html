<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
    </head>

    <body>
        <canvas id="dessin" width="640" height="480"></canvas>

        <script>
            // Gestionnaire
            var x = 0;
            document.addEventListener("keydown", down, false);
            document.addEventListener("keyup", up, false);

            function down(e) {
                // Traitement de différents cas
                switch(e.keyCode) {
                    case 39:
                        // Flèche droite
                        x = 4;
                        break;
                    case 37:
                        // Flèche gauche
                        x = -4;
                        break;
                    default:
                }
            }

            function up(e) {
                x = 0;
            }

            // Canvas
            var cv = document.getElementById('dessin');
            if(cv.getContext) {
                var ctx = cv.getContext('2d');

                ctx.translate(cv.width/2, cv.height/2);

                ctx.fillStyle = "blue";
                ctx.fillRect(0, 0, 20, 20);
            } else {
                alert("Canvas non supporté par ce navigateur");
            }

            // Fonction de dessin
            function translation() {
                ctx.clearRect(0, 0, cv.width, cv.height);     // efface tout le canevas

                ctx.translate(x, 2);

                // Dessin
                ctx.fillRect(0, 0, 20, 20);
                
                i++;

                if(i>100) {
                    clearInterval(inter);
                }
            }

            // Incrément
            var i = 0;

            // Timer
            var inter = setInterval(translation, 100);
        </script>
    </body>
</html>

